version: "3.7"

#  ____  ____   ___   _______     _____  ________    ___   ____  _____  
# |_   ||   _|.'   `.|_   __ \   |_   _||  __   _| .'   `.|_   \|_   _| 
#   | |__| | /  .-.  \ | |__) |    | |  |_/  / /  /  .-.  \ |   \ | |   
#   |  __  | | |   | | |  __ /     | |     .'.' _ | |   | | | |\ \| |   
#  _| |  | |_\  `-'  /_| |  \ \_  _| |_  _/ /__/ |\  `-'  /_| |_\   |_  
# |____||____|`.___.'|____| |___||_____||________| `.___.'|_____|\____| 
#   _____     ____     _____   ______                                   
#  / ___ `. .'    '.  / ___ `./ ____ `.                                 
# |_/___) ||  .--.  ||_/___) |`'  __) |                                 
#  .'____.'| |    | | .'____.'_  |__ '.                                 
# / /_____ |  `--'  |/ /_____| \____) |                                 
# |_______| '.____.' |_______|\______.'                                 
                                                                      
services:
  mongo-setup:
    image: mongo
    restart: on-failure
    entrypoint: ["bash","/scripts/make_replica_set.sh"]   
    volumes:
      - ./scripts:/scripts   
    env_file:
      - .env
    depends_on:
      - mongo1
      - mongo2
      - mongo3
    networks:
      - horizon-net

networks:
  horizon-net: